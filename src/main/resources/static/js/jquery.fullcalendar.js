!function(a){var b=function(){this.$body=a("body");this.$modal=a("#event-modal"),this.$event=("#external-events div.external-event"),this.$calendar=a("#calendar"),this.$saveCategoryBtn=a(".save-category"),this.$categoryForm=a("#add-category form"),this.$extEvents=a("#external-events"),this.$calendarObj=null};b.prototype.onDrop=function(g,f){var d=this;var h=g.data("eventObject");var c=g.attr("data-class");var e=a.extend({},h);e.start=f;if(c){e.className=[c]}d.$calendar.fullCalendar("renderEvent",e,true);if(a("#drop-remove").is(":checked")){g.remove()}},b.prototype.onEventClick=function(d,f,g){var c=this;var e=a("<form class='event-form'></form>");e.append("<label>Change event name</label>");e.append("<div class='input-group'><input class='form-control' type=text value='"+d.title+"' /><span class='input-group-append'><button type='submit' class='btn btn-success btn-md'>Save</button></span></div>");c.$modal.modal({backdrop:"static"});c.$modal.find(".delete-event").show().end().find(".save-event").hide().end().find(".modal-body").empty().prepend(e).end().find(".delete-event").unbind("click").click(function(){c.$calendarObj.fullCalendar("removeEvents",function(h){return(h._id==d._id)});c.$modal.modal("hide")});c.$modal.find("form").on("submit",function(){d.title=e.find("input[type=text]").val();c.$calendarObj.fullCalendar("updateEvent",d);c.$modal.modal("hide");return false})},b.prototype.onSelect=function(g,e,d){var c=this;c.$modal.modal({backdrop:"static"});var f=a("<form></form>");f.append("<div class='row'></div>");f.find(".row").append("<div class='col-md-12'><div class='form-group'><label class='control-label'>Event Name</label><input class='form-control' type='text' name='title'/></div></div>").append("<div class='col-md-12'><div class='form-group'><label class='control-label'>Category</label><select class='select form-control' name='category'></select></div></div>").find("select[name='category']").append("<option value='bg-primary'>Danger</option>").append("<option value='bg-success'>Success</option>").append("<option value='bg-purple'>Purple</option>").append("<option value='bg-primary'>Primary</option>").append("<option value='bg-pink'>Pink</option>").append("<option value='bg-info'>Info</option>").append("<option value='bg-inverse'>Inverse</option>").append("<option value='bg-orange'>Orange</option>").append("<option value='bg-brown'>Brown</option>").append("<option value='bg-teal'>Teal</option>").append("<option value='bg-warning'>Warning</option></div></div>");c.$modal.find(".delete-event").hide().end().find(".save-event").show().end().find(".modal-body").empty().prepend(f).end().find(".save-event").unbind("click").click(function(){f.submit()});c.$modal.find("form").on("submit",function(){var k=f.find("input[name='title']").val();var h=f.find("input[name='beginning']").val();var j=f.find("input[name='ending']").val();var i=f.find("select[name='category'] option:checked").val();if(k!==null&&k.length!=0){c.$calendarObj.fullCalendar("renderEvent",{title:k,start:g,end:e,allDay:false,className:i},true);c.$modal.modal("hide")}else{alert("You have to give a title to your event")}return false});c.$calendarObj.fullCalendar("unselect")},b.prototype.enableDrag=function(){a(this.$event).each(function(){var c={title:a.trim(a(this).text())};a(this).data("eventObject",c);a(this).draggable({zIndex:999,revert:true,revertDuration:0})})};b.prototype.init=function(){this.enableDrag();var f=new Date();var e=f.getDate();var i=f.getMonth();var k=f.getFullYear();var h="";var j=new Date(a.now());var g=[{title:"Event Name 4",start:new Date(a.now()+148000000),className:"bg-[#7460ee] border border-[#7460ee] rounded-sm text-[13px] mx-[7px] my-[1px] p-[5px] text-center"},{title:"Test Event 1",start:j,end:j,className:"bg-success border border-success rounded-sm text-[13px] mx-[7px] my-[1px] p-[5px] text-center"},{title:"Test Event 2",start:new Date(a.now()+168000000),className:"bg-[#009efb] border border-[#009efb] rounded-sm text-[13px] mx-[7px] my-[1px] p-[5px] text-center"},{title:"Test Event 3",start:new Date(a.now()+338000000),className:"bg-primary border border-primary rounded-sm text-[13px] mx-[7px] my-[1px] p-[5px] text-center"}];var c=this;c.$calendarObj=c.$calendar.fullCalendar({slotDuration:"00:15:00",minTime:"08:00:00",maxTime:"19:00:00",defaultView:"month",handleWindowResize:true,height:a(window).height()-200,header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},events:g,editable:true,droppable:true,eventLimit:true,selectable:true,drop:function(d){c.onDrop(a(this),d)},select:function(m,l,d){c.onSelect(m,l,d)},eventClick:function(d,l,m){c.onEventClick(d,l,m)}});this.$saveCategoryBtn.on("click",function(){var l=c.$categoryForm.find("input[name='category-name']").val();var d=c.$categoryForm.find("select[name='category-color']").val();if(l!==null&&l.length!=0){c.$extEvents.append('<div class="external-event bg-'+d+'" data-class="bg-'+d+'" style="position: relative;"><i class="mdi mdi-checkbox-blank-circle m-r-10 vertical-middle"></i>'+l+"</div>");c.enableDrag()}})},a.CalendarApp=new b,a.CalendarApp.Constructor=b}(window.jQuery),function(a){a.CalendarApp.init()}(window.jQuery);