if("undefined"==typeof jQuery){throw new Error("multiselect requires jQuery")}!function(){var a=jQuery.fn.jquery.split(" ")[0].split(".");if(a[0]<2&&a[1]<7){throw new Error("multiselect requires jQuery version 1.7 or higher")}}(),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(b){var h,g=(h=b,j.prototype={init:function(){var e=this;e.undoStack=[],e.redoStack=[],e.options.keepRenderingSort&&(!(e.skipInitSort=!0)!==e.callbacks.sort&&(e.callbacks.sort={left:function(k,i){return h(k).data("position")>h(i).data("position")?1:-1},right:function(k,i){return h(k).data("position")>h(i).data("position")?1:-1}}),e.$left.attachIndex(),e.$right.each(function(k,i){h(i).attachIndex()})),"function"==typeof e.callbacks.startUp&&e.callbacks.startUp(e.$left,e.$right),e.skipInitSort||("function"==typeof e.callbacks.sort.left&&e.$left.mSort(e.callbacks.sort.left),"function"==typeof e.callbacks.sort.right&&e.$right.each(function(k,i){h(i).mSort(e.callbacks.sort.right)})),e.options.search&&e.options.search.left&&(e.options.search.$left=h(e.options.search.left),e.$left.before(e.options.search.$left)),e.options.search&&e.options.search.right&&(e.options.search.$right=h(e.options.search.right),e.$right.before(h(e.options.search.$right))),e.events(),"function"==typeof e.callbacks.afterInit&&e.callbacks.afterInit()},events:function(){var e=this;e.options.search&&e.options.search.$left&&e.options.search.$left.on("keyup",function(i){e.callbacks.fireSearch(this.value)?(e.$left.find('option:search("'+this.value+'")').mShow(),e.$left.find('option:not(:search("'+this.value+'"))').mHide(),e.$left.find("option").closest("optgroup").mHide(),e.$left.find("option:not(.hidden)").parent("optgroup").mShow()):e.$left.find("option, optgroup").mShow()}),e.options.search&&e.options.search.$right&&e.options.search.$right.on("keyup",function(i){e.callbacks.fireSearch(this.value)?(e.$right.find('option:search("'+this.value+'")').mShow(),e.$right.find('option:not(:search("'+this.value+'"))').mHide(),e.$right.find("option").closest("optgroup").mHide(),e.$right.find("option:not(.hidden)").parent("optgroup").mShow()):e.$right.find("option, optgroup").mShow()}),e.$right.closest("form").on("submit",function(i){e.options.search&&(e.options.search.$left&&e.options.search.$left.val("").trigger("keyup"),e.options.search.$right&&e.options.search.$right.val("").trigger("keyup")),e.$left.find("option").prop("selected",e.options.submitAllLeft),e.$right.find("option").prop("selected",e.options.submitAllRight)}),e.$left.on("dblclick","option",function(k){k.preventDefault();var i=e.$left.find("option:selected:not(.hidden)");i.length&&e.moveToRight(i,k)}),e.$left.on("click","optgroup",function(i){"OPTGROUP"==h(i.target).prop("tagName")&&h(this).children().prop("selected",!0)}),e.$left.on("keypress",function(k){var i;13===k.keyCode&&(k.preventDefault(),(i=e.$left.find("option:selected:not(.hidden)")).length&&e.moveToRight(i,k))}),e.$right.on("dblclick","option",function(k){k.preventDefault();var i=e.$right.find("option:selected:not(.hidden)");i.length&&e.moveToLeft(i,k)}),e.$right.on("click","optgroup",function(i){"OPTGROUP"==h(i.target).prop("tagName")&&h(this).children().prop("selected",!0)}),e.$right.on("keydown",function(k){var i;8!==k.keyCode&&46!==k.keyCode||(k.preventDefault(),(i=e.$right.find("option:selected:not(.hidden)")).length&&e.moveToLeft(i,k))}),(navigator.userAgent.match(/MSIE/i)||0<navigator.userAgent.indexOf("Trident/")||0<navigator.userAgent.indexOf("Edge/"))&&(e.$left.dblclick(function(i){e.actions.$rightSelected.trigger("click")}),e.$right.dblclick(function(i){e.actions.$leftSelected.trigger("click")})),e.actions.$rightSelected.on("click",function(k){k.preventDefault();var i=e.$left.find("option:selected:not(.hidden)");i.length&&e.moveToRight(i,k),h(this).blur()}),e.actions.$leftSelected.on("click",function(k){k.preventDefault();var i=e.$right.find("option:selected:not(.hidden)");i.length&&e.moveToLeft(i,k),h(this).blur()}),e.actions.$rightAll.on("click",function(k){k.preventDefault();var i=e.$left.children(":not(span):not(.hidden)");i.length&&e.moveToRight(i,k),h(this).blur()}),e.actions.$leftAll.on("click",function(k){k.preventDefault();var i=e.$right.children(":not(span):not(.hidden)");i.length&&e.moveToLeft(i,k),h(this).blur()}),e.actions.$undo.on("click",function(i){i.preventDefault(),e.undo(i)}),e.actions.$redo.on("click",function(i){i.preventDefault(),e.redo(i)}),e.actions.$moveUp.on("click",function(k){k.preventDefault();var i=e.$right.find(":selected:not(span):not(.hidden)");i.length&&e.moveUp(i,k),h(this).blur()}),e.actions.$moveDown.on("click",function(k){k.preventDefault();var i=e.$right.find(":selected:not(span):not(.hidden)");i.length&&e.moveDown(i,k),h(this).blur()})},moveToRight:function(q,k,p,m){var l=this;return"function"==typeof l.callbacks.moveToRight?l.callbacks.moveToRight(l,q,k,p,m):!("function"==typeof l.callbacks.beforeMoveToRight&&!p&&!l.callbacks.beforeMoveToRight(l.$left,l.$right,q))&&(l.moveFromAtoB(l.$left,l.$right,q,k,p,m),m||(l.undoStack.push(["right",q]),l.redoStack=[]),"function"!=typeof l.callbacks.sort.right||p||l.doNotSortRight||l.$right.mSort(l.callbacks.sort.right),"function"!=typeof l.callbacks.afterMoveToRight||p||l.callbacks.afterMoveToRight(l.$left,l.$right,q),l)},moveToLeft:function(q,k,p,m){var l=this;return"function"==typeof l.callbacks.moveToLeft?l.callbacks.moveToLeft(l,q,k,p,m):!("function"==typeof l.callbacks.beforeMoveToLeft&&!p&&!l.callbacks.beforeMoveToLeft(l.$left,l.$right,q))&&(l.moveFromAtoB(l.$right,l.$left,q,k,p,m),m||(l.undoStack.push(["left",q]),l.redoStack=[]),"function"!=typeof l.callbacks.sort.left||p||l.$left.mSort(l.callbacks.sort.left),"function"!=typeof l.callbacks.afterMoveToLeft||p||l.callbacks.afterMoveToLeft(l.$left,l.$right,q),l)},moveFromAtoB:function(s,l,m,r,q,p){var k=this;return"function"==typeof k.callbacks.moveFromAtoB?k.callbacks.moveFromAtoB(k,s,l,m,r,q,p):(m.each(function(A,u){var y,x,v,z,w=h(u);if(k.options.ignoreDisabled&&w.is(":disabled")){return !0}w.is("optgroup")||w.parent().is("optgroup")?(y=w.is("optgroup")?w:w.parent(),x="optgroup["+k.options.matchOptgroupBy+'="'+y.prop(k.options.matchOptgroupBy)+'"]',(v=l.find(x)).length||((v=y.clone(!0)).empty(),l.move(v)),w.is("optgroup")?(z="",k.options.ignoreDisabled&&(z=":not(:disabled)"),v.move(w.find("option"+z))):v.move(w),y.removeIfEmpty()):l.move(w)}),k)},moveUp:function(e){if("function"==typeof this.callbacks.beforeMoveUp&&!this.callbacks.beforeMoveUp(e)){return !1}e.first().prev().before(e),"function"==typeof this.callbacks.afterMoveUp&&this.callbacks.afterMoveUp(e)},moveDown:function(e){if("function"==typeof this.callbacks.beforeMoveDown&&!this.callbacks.beforeMoveDown(e)){return !1}e.last().next().after(e),"function"==typeof this.callbacks.afterMoveDown&&this.callbacks.afterMoveDown(e)},undo:function(k){var i=this.undoStack.pop();if(i){switch(this.redoStack.push(i),i[0]){case"left":this.moveToRight(i[1],k,!1,!0);break;case"right":this.moveToLeft(i[1],k,!1,!0)}}},redo:function(k){var i=this.redoStack.pop();if(i){switch(this.undoStack.push(i),i[0]){case"left":this.moveToLeft(i[1],k,!1,!0);break;case"right":this.moveToRight(i[1],k,!1,!0)}}}},j);function j(m,i){var l,k=m.prop("id");this.$left=m,this.$right=h(i.right).length?h(i.right):h("#"+k+"_to"),this.actions={$leftAll:h(i.leftAll).length?h(i.leftAll):h("#"+k+"_leftAll"),$rightAll:h(i.rightAll).length?h(i.rightAll):h("#"+k+"_rightAll"),$leftSelected:h(i.leftSelected).length?h(i.leftSelected):h("#"+k+"_leftSelected"),$rightSelected:h(i.rightSelected).length?h(i.rightSelected):h("#"+k+"_rightSelected"),$undo:h(i.undo).length?h(i.undo):h("#"+k+"_undo"),$redo:h(i.redo).length?h(i.redo):h("#"+k+"_redo"),$moveUp:h(i.moveUp).length?h(i.moveUp):h("#"+k+"_move_up"),$moveDown:h(i.moveDown).length?h(i.moveDown):h("#"+k+"_move_down")},delete i.leftAll,delete i.leftSelected,delete i.right,delete i.rightAll,delete i.rightSelected,delete i.undo,delete i.redo,delete i.moveUp,delete i.moveDown,this.options={keepRenderingSort:i.keepRenderingSort,submitAllLeft:void 0===i.submitAllLeft||i.submitAllLeft,submitAllRight:void 0===i.submitAllRight||i.submitAllRight,search:i.search,ignoreDisabled:void 0!==i.ignoreDisabled&&i.ignoreDisabled,matchOptgroupBy:void 0!==i.matchOptgroupBy?i.matchOptgroupBy:"label"},delete i.keepRenderingSort,i.submitAllLeft,i.submitAllRight,i.search,i.ignoreDisabled,i.matchOptgroupBy,this.callbacks=i,"function"==typeof this.callbacks.sort&&(l=this.callbacks.sort,this.callbacks.sort={left:l,right:l}),this.init()}b.multiselect={defaults:{startUp:function(e,i){i.find("option").each(function(m,k){var l;"OPTGROUP"==b(k).parent().prop("tagName")?(l='optgroup[label="'+b(k).parent().attr("label")+'"]',e.find(l+' option[value="'+k.value+'"]').each(function(o,n){n.remove()}),e.find(l).removeIfEmpty()):e.find('option[value="'+k.value+'"]').remove()})},afterInit:function(){return !0},beforeMoveToRight:function(l,i,k){return !0},afterMoveToRight:function(l,i,k){},beforeMoveToLeft:function(l,i,k){return !0},afterMoveToLeft:function(l,i,k){},beforeMoveUp:function(e){return !0},afterMoveUp:function(e){},beforeMoveDown:function(e){return !0},afterMoveDown:function(e){},sort:function(k,i){return"NA"==k.innerHTML||"NA"!=i.innerHTML&&k.innerHTML>i.innerHTML?1:-1},fireSearch:function(e){return 1<e.length}}};var a=window.navigator.userAgent,f=-3<a.indexOf("MSIE ")+a.indexOf("Trident/")+a.indexOf("Edge/"),d=-1<a.toLowerCase().indexOf("safari"),c=-1<a.toLowerCase().indexOf("firefox");b.fn.multiselect=function(e){return this.each(function(){var l=b(this),i=l.data("crlcu.multiselect"),k=b.extend({},b.multiselect.defaults,l.data(),"object"==typeof e&&e);i||l.data("crlcu.multiselect",i=new g(l,k))})},b.fn.move=function(e){return this.append(e).find("option").prop("selected",!1),this},b.fn.removeIfEmpty=function(){return this.children().length||this.remove(),this},b.fn.mShow=function(){return this.removeClass("hidden").show(),(f||d)&&this.each(function(k,i){b(i).parent().is("span")&&b(i).parent().replaceWith(i),b(i).show()}),c&&this.prop("disabled",!1),this},b.fn.mHide=function(){return this.addClass("hidden").hide(),(f||d)&&this.each(function(k,i){b(i).parent().is("span")||b(i).wrap("<span>").hide()}),c&&this.prop("disabled",!0),this},b.fn.mSort=function(e){return this.children().sort(e).appendTo(this),this.find("optgroup").each(function(k,i){b(i).children().sort(e).appendTo(i)}),this},b.fn.attachIndex=function(){this.children().each(function(l,i){var k=b(i);k.is("optgroup")&&k.children().each(function(n,m){b(m).data("position",n)}),k.data("position",l)})},b.expr[":"].search=function(m,i,l){var k=new RegExp(l[3].replace(/([^a-zA-Z0-9])/g,"\\$1"),"i");return b(m).text().match(k)}});